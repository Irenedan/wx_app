(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-173e0b26"],{"137e":function(t,e,s){},"202e":function(t,e,s){"use strict";var i=s("137e"),n=s.n(i);n.a},"75b8":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"upload-confirm"},[t._m(0),t._m(1),i("div",{staticClass:"upload-photos-list"},[t._l(t.imgUrlList,(function(e,n){return i("div",{key:n,staticClass:"upload-photos-item"},[i("div",{staticClass:"upload-photos-img"},[i("img",{attrs:{src:e.url,alt:""}})]),i("div",{staticClass:"upload-photos-text"},[i("div",{staticClass:"upload-photos-name ellipse"},[t._v("\n          "+t._s(e.name)+"\n        ")]),i("div",{staticClass:"delete-upload-photos",on:{click:function(e){return t.delPhotos(n)}}},[i("img",{attrs:{src:s("c373"),alt:""}}),i("span",[t._v("删除")])])])])})),i("div",{staticClass:"continue-upload-btn"},[i("img",{attrs:{src:s("f80a"),alt:""}}),i("span",[t._v("继续上传")]),i("input",{staticClass:"input-file",attrs:{type:"file",accept:"image/gif,image/jpeg,image/jpg,image/png",multiple:""},on:{change:function(e){return t.changeImage(e)}}})])],2),i("div",{staticClass:"footer-box"}),i("div",{staticClass:"footer"},[i("div",{staticClass:"upload-photos-btn",on:{click:t.uploadImg}},[t._v("\n      确定上传\n    ")])]),i("div",{staticClass:"footer-picker wrapper"},[i("mt-picker",{ref:"picker",attrs:{slots:t.slots,"visible-item-count":5,"show-toolbar":!0,"value-key":"name"}},[i("mt-button",{staticClass:"sure",on:{click:t.handleConfirm}},[t._v("确认")])],1)],1)])},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"upload-confirm-header"},[t._v("\n    上传确认\n    "),s("span",[t._v("单次最多可上传9张图片")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"nav-method"},[i("div",{staticClass:"nav-name"},[t._v("\n      图片直播\n    ")]),i("div",{staticClass:"nav-icon"},[i("img",{attrs:{src:s("819d"),alt:""}})])])}],a=(s("96cf"),s("3b8d")),c=(s("7f7f"),{data:function(){return{imgUrlList:[],file:[],type:"spot",slots:[{flex:1,values:[{val:"scene",name:"现场直播"},{val:"spot",name:"展台亮点"}],className:"slot1"}]}},methods:{handleConfirm:function(){console.log(this.$refs.picker.getValues()[0])},delPhotos:function(t){this.imgUrlList.splice(t,1),this.file.splice(t,1)},changeImage:function(t){var e=t.target.files;if(this.imgUrlList.length>9)this.$zero.Toast("选择失败：单次最多可上传9张图片");else{var s=[];if(this.imgUrlList.length>0){for(var i=0;i<e.length;i++){for(var n=!0,a=0;a<this.imgUrlList.length;a++)this.imgUrlList[a].name===e[i].name&&(n=!1);n&&s.push(e[i])}this.imgHandle(s)}else this.imgHandle(e)}},imgHandle:function(t){for(var e=0;e<t.length;e++){var s={url:this.$zero.fileToBlobUrl(t[e]),name:t[e].name,show:1};this.imgUrlList.push(s),this.file.push(t[e])}},uploadImg:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e,s,i,n,a,c,o,r,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==this.imgUrlList.length){t.next=3;break}return this.$zero.Toast("请上传图片"),t.abrupt("return");case 3:for(t.prev=3,e=new FormData,s=0;s<this.file.length;s++)e.append("file",this.file[s]);return t.next=8,this.$api.files.uploadImg({file:e});case 8:if(i=t.sent,75200===i.statusCode||75600===i.statusCode){t.next=12;break}return this.$zero.Toast("服务器异常，请稍后重试"),t.abrupt("return");case 12:if(n=[],i.imgStatus)for(a=i.imgStatus,c=0;c<a.length;c++)o={url:a[c].server_name,name:a[c].upload_name,show:1},n.push(o);else r={url:i.server_name,name:i.upload_name,show:1},n.push(r);return t.next=16,this.$api.staffOnly.postImg({exhibitionID:"",img:n,type:this.type});case 16:l=t.sent,console.log(l),75200===l.statusCode?this.$router.push("/staffWorkbench"):this.$zero.Toast("服务器异常，请稍后重试"),t.next=24;break;case 21:t.prev=21,t.t0=t["catch"](3),this.$zero.Toast("服务器异常，请稍后重试");case 24:case"end":return t.stop()}}),t,this,[[3,21]])})));function e(){return t.apply(this,arguments)}return e}()},created:function(){this.$route.params.length>0&&this.imgHandle(this.$route.params)}}),o=c,r=(s("202e"),s("2877")),l=Object(r["a"])(o,i,n,!1,null,null,null);e["default"]=l.exports},"7f7f":function(t,e,s){var i=s("86cc").f,n=Function.prototype,a=/^\s*function ([^ (]*)/,c="name";c in n||s("9e1e")&&i(n,c,{configurable:!0,get:function(){try{return(""+this).match(a)[1]}catch(t){return""}}})},"819d":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAACXBIWXMAAAsSAAALEgHS3X78AAABeElEQVQ4jeWUvUoDQRDHf7OHIBJILGwVEWyNlYWFio2dvoF5A5Mn0EfIG5i8gYKFnbGwsNFEUFCIxvgR8QNPCaLc4sqd5ry4iRJI58BwMDP/3+7M3q4YY+iWqa6Rug4TjrJWtEOTzfe0bJAUzKFBqxJaLZje0UonGNl+S6BVDs+ZR6uZRptjQFHq5WlL0cZk5yXpa4D5sM1IaRzYksezldbyyI526ylgHxiKxlsdwLLcVQtSu0xYkAM3IXvPOWDVUn3BnqwoTAEVubgO25ajB7+tArBoVX8yXP8A/CEW0GoM7YCnCL5aNTyD57holUU78SDmNXJBXQnPSZk5VQxvgLye+MVLLWDgOVFxFJZHq7SZ7XEDRvQ6Sb28gKdy4Q5+h2XMZF/TP9p0ACY2sgb4sylZU/m2c2D8J8iCBcD+4YoZGPSBeQsD6/5iZiJWtDKB2Ji2TvUqxWnN5fjWcHifblfX8D+fIDm7SeI5CTM6ULCSP2v/wXsGfACzecXuNuMG6AAAAABJRU5ErkJggg=="},c373:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAACXBIWXMAAAsSAAALEgHS3X78AAAA+UlEQVRIie2WvQ3CMBBGH4gB6KBkhEgMQFjiWhiBDWAERqC+JQIbZAEkRkhBH2RkJGMn5AcSmrwqdzrnsz+f44zyPKdrJoXvF9kCiyBfjzOqZ7eyWASMyCrINhGqIbIDpkG2Hje/quc9EYmAIzAHZkFlM67AHdUYz67pl/vgsnSD0C6RA7AH1n6XVFIydvyjmX+krLvclUVPK18zEzE+Z6imiBiLo2dHqQZd1WQlphkSJ05sDiuQ2HNVSi92DSKDSHdUH0ZIvfji5DIblx5Eaomo7rw4dp6NWByM8fi7XVv7nWpCYf0nkU2QaUmRyMn/EWjBW7N0f8cDD7ibPjDSuUobAAAAAElFTkSuQmCC"},f80a:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAB4CAYAAAA5ZDbSAAAACXBIWXMAAAsSAAALEgHS3X78AAABTUlEQVR4nO3csQ0DIRAAQezK3TkWDfxHBLeaKQCBVmSn++y913C/y9e/ff5V38mX553AcQLHCRwncJzAcQLHCRwncJzAcQLHCRwncJzAcQLHCRwncJzAcQLHCRwncJzAcQLHCRwncJzAcQLHCRwncJzAcQLHCRwncJzAcQLHCRwncJzAcQLHCRwncJzAcQLHCRwncJzAcQLHnX3Ro/ch88wPjhM4TuA4geMEjhM4TuA4geMEjhM4TuA4geMEjhM4TuA4geMEjhM4TuA4geMEjhM4TuC4Mxc9/YW357pHz437wXECxwkcJ3CcwHECxwkcJ3CcwHECxwkcJ3CcwHECxwkcJ3CcwHECxwkcJ3CcwHECxwkcJ3CcwHECxwkcJ3CcwHECxwkcJ3CcwHECxwkcJ3CcwHECxwkcJ3CcwHECxwkcJ3CcwHECxwlcttb6A/L4DGUKQWvPAAAAAElFTkSuQmCC"}}]);
//# sourceMappingURL=chunk-173e0b26.c388811c.js.map